(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{100:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),c=a(13),l=a.n(c),i=(a(83),a(55)),r=a(10),s=a(127),u=a(7),d=a(28),m=a(65),g=a(66),p=a(3),f={items:[],item:{}},E={count:1},b=a(20),O={isLoading:!1,tweets:[],users:[],data:null},v={isLoading:!1,data:null},y={isLoading:!1,data:null,done:0},h={isLoading:!1,data:null,done:0},L={flag:!0,profile:!1,userData:{},load:!1,open:{},usernameData:{}},j={isLoading:!1,data:null},S={isLoading:!1,data:null,done:-1},T={isLoading:!1,data:null,flag:null},_=Object(d.combineReducers)({posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_POSTS":return console.log("reducer.."),Object(p.a)(Object(p.a)({},e),{},{items:t.payload});default:return e}},counter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INCREMENT":return console.log("reducer.."),Object(p.a)(Object(p.a)({},e),{},{count:t.payload});default:return e}},allTweetsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ALL_TWEETS_LOAD":return Object(p.a)(Object(p.a)({},e),{},{isLoading:!0});case"ALL_TWEETS_SUCCESS":return Object(p.a)(Object(p.a)({},e),{},{isLoading:!1,tweets:[].concat(Object(b.a)(O.tweets),Object(b.a)(t.tweets)),users:[].concat(Object(b.a)(O.users),Object(b.a)(t.users))});case"ALL_TWEETS_FAIL":return Object(p.a)(Object(p.a)({},e),{},{isLoading:!1,data:t.payload});default:return e}},loginReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_LOAD":return Object(p.a)(Object(p.a)({},e),{},{isLoading:!0});case"LOGIN_SUCCESS":case"LOGIN_FAIL":return Object(p.a)(Object(p.a)({},e),{},{isLoading:!1,data:t.payload,done:t.done});case"LOGOUT":return Object(p.a)(Object(p.a)({},e),{},{isLoading:!1,data:t.payload,done:0});default:return e}},signupReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGNUP_LOAD":return Object(p.a)(Object(p.a)({},e),{},{isLoading:!0});case"SIGNUP_SUCCESS":case"SIGNUP_FAIL":return Object(p.a)(Object(p.a)({},e),{},{isLoading:!1,data:t.payload,done:t.done});default:return e}},myTweetsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MY_TWEETS_LOAD":return Object(p.a)(Object(p.a)({},e),{},{isLoading:!0});case"MY_TWEETS_SUCCESS":case"MY_TWEETS_FAIL":return Object(p.a)(Object(p.a)({},e),{},{isLoading:!1,data:t.payload});default:return e}},miscActionReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_TWEET_PAGE":return Object(p.a)(Object(p.a)({},e),{},{flag:t.payload});case"GO_TO_PROFILE":return Object(p.a)(Object(p.a)({},e),{},{profile:t.payload});case"USER_DATA":return Object(p.a)(Object(p.a)({},e),{},{userData:t.payload});case"USERNAME_DATA":return Object(p.a)(Object(p.a)({},e),{},{usernameData:t.payload});case"LOAD_DATA":return Object(p.a)(Object(p.a)({},e),{},{load:t.payload});case"SNACK_BAR":return Object(p.a)(Object(p.a)({},e),{},{open:t.payload});default:return e}},profileReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_PROFILE_LOAD":return Object(p.a)(Object(p.a)({},e),{},{isLoading:!0});case"GET_PROFILE_SUCCESS":case"GET_PROFILE_FAIL":return Object(p.a)(Object(p.a)({},e),{},{isLoading:!1,data:t.payload});case"UPD_PROFILE_LOAD":return Object(p.a)(Object(p.a)({},e),{},{isLoading:!0});case"UPD_PROFILE_SUCCESS":case"UPD_PROFILE_FAIL":return Object(p.a)(Object(p.a)({},e),{},{isLoading:!1,data:t.payload});default:return e}},tweetReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_TWEET_LOAD":return Object(p.a)(Object(p.a)({},e),{},{isLoading:!0});case"CREATE_TWEET_SUCCESS":case"CREATE_TWEET_FAIL":return Object(p.a)(Object(p.a)({},e),{},{isLoading:!1,data:t.payload,done:t.done});case"UPD_TWEET_LOAD":return Object(p.a)(Object(p.a)({},e),{},{isLoading:!0,done:t.done});case"UPD_TWEET_SUCCESS":case"UPD_TWEET_FAIL":return Object(p.a)(Object(p.a)({},e),{},{isLoading:!1,data:t.payload,done:t.done});case"DEL_TWEET_LOAD":return Object(p.a)(Object(p.a)({},e),{},{isLoading:!0});case"DEL_TWEET_SUCCESS":case"DEL_TWEET_FAIL":return Object(p.a)(Object(p.a)({},e),{},{isLoading:!1,data:t.payload,done:t.done});default:return e}},likeReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_LIKE_LIST_LOAD":return Object(p.a)(Object(p.a)({},e),{},{isLoading:!0});case"GET_LIKE_LIST_SUCCESS":case"GET_LIKE_LIST_FAIL":return Object(p.a)(Object(p.a)({},e),{},{isLoading:!1,data:t.payload});case"LIKE_TWEET":return Object(p.a)(Object(p.a)({},e),{},{isLoading:!1,flag:t.payload});default:return e}}}),w=[m.a],I=Object(d.createStore)(_,{},Object(g.composeWithDevTools)(d.applyMiddleware.apply(void 0,w))),A=a(22),k=a(30),C=a.n(k),N=(a(14),a(35)),R=a(4),D=a(47),P=a.n(D),U="http://ec2-65-0-45-103.ap-south-1.compute.amazonaws.com:5000",x=function(){return o.a.createElement("div",{id:"loader"})};var F=Object(u.b)((function(e){return{data:e.signupReducer.data,Loading:e.signupReducer.isLoading,success:e.signupReducer.done}}),(function(e){return{signup:function(t){return e(function(e){return function(t){var a={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(e)};t({type:"SIGNUP_LOAD",isLoading:!0}),fetch("".concat(U,"/auth/register/"),a).then((function(e){return e.json()})).then((function(e){console.log(e),200===e.status?(t({type:"SIGNUP_SUCCESS",isLoading:!1,payload:e,done:1}),t({type:"SNACK_BAR",payload:{type:1,msg:"registered!"}})):(t({type:"SIGNUP_FAIL",isLoading:!1,payload:e,done:-1}),t({type:"SNACK_BAR",payload:{type:0,msg:e.message}}))})).catch((function(e){console.log(e),t({type:"SIGNUP_FAIL",isLoading:!1,payload:e,done:0}),t({type:"SNACK_BAR",payload:{type:0,msg:e.message}})}))}}(t))}}}))((function(e){var t=Object(n.useState)(!1),a=Object(R.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(null),r=Object(R.a)(i,2),s=r[0],u=r[1];function d(){l(!1)}return Object(n.useEffect)((function(){null!=s&&(e.signup(s),1===e.success?console.log("success"):console.log("Profile creation unsuccessful"))}),[s]),o.a.createElement("div",{className:"App"},o.a.createElement("button",{onClick:function(){l(!0)},className:"signup"},"Sign Up"),o.a.createElement(P.a,{isOpen:c,onRequestClose:d,className:"modalStyle",ariaHideApp:!1},e.Loading?o.a.createElement(x,null):o.a.createElement("div",{className:"basediv"},o.a.createElement("img",{src:C.a,alt:"logo",style:{height:"30px",width:"30px",display:"block",margin:"auto",marginTop:"20px"}}),o.a.createElement("form",{id:"signup",className:"formStyle"},o.a.createElement("label",null,"Name"),o.a.createElement("input",{name:"name",type:"text"}),o.a.createElement("label",null,"Username"),o.a.createElement("input",{name:"username",type:"text"}),o.a.createElement("label",null,"Email"),o.a.createElement("input",{name:"email",type:"email"}),o.a.createElement("label",null,"Password"),o.a.createElement("input",{name:"password",type:"password"}),o.a.createElement("button",{onClick:function(e){return function(e){e.preventDefault();var t,a=document.getElementById("signup").querySelectorAll("input"),n={},o=Object(N.a)(a);try{for(o.s();!(t=o.n()).done;){var c=t.value;n[c.name]=c.value}}catch(l){o.e(l)}finally{o.f()}console.log(n),u(n),d()}(e)},className:"smallbtn"},"submit")))))}));var W=Object(u.b)((function(e){return{data:e.loginReducer.data,Loading:e.loginReducer.isLoading,success:e.loginReducer.done}}),(function(e){return{login:function(t){return e(function(e){return function(t){var a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};t({type:"LOGIN_LOAD",isLoading:!0}),fetch("".concat(U,"/auth/login"),a).then((function(e){return e.json()})).then((function(e){console.log(e),e.token?(localStorage.setItem("twitter-token",e.token),localStorage.setItem("userid",e.user_info._id),localStorage.setItem("name",e.user_info.name),localStorage.setItem("username",e.user_info.username),localStorage.setItem("email",e.user_info.email),localStorage.setItem("userPic",e.user_info.profile.profilePic),t({type:"LOGIN_SUCCESS",isLoading:!1,payload:e,done:1}),t({type:"SNACK_BAR",payload:{type:1,msg:"logged in!"}})):(t({type:"LOGIN_FAIL",isLoading:!1,payload:e,done:-1}),t({type:"SNACK_BAR",payload:{type:0,msg:e.message}}))})).catch((function(e){console.log(e),t({type:"LOGIN_FAIL",isLoading:!1,payload:e,done:-1}),t({type:"SNACK_BAR",payload:{type:0,msg:e.message}})}))}}(t))}}}))((function(e){var t=Object(n.useState)(!1),a=Object(R.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(null),r=Object(R.a)(i,2),s=r[0],u=r[1];function d(){l(!1)}return Object(n.useEffect)((function(){null!=s&&(e.login(s),d())}),[s]),Object(n.useEffect)((function(){e.data&&(-1===e.success?console.log("something went wrong..."):console.log("storing info..."))}),[e.Loading]),o.a.createElement("div",{className:"App"},o.a.createElement("button",{onClick:function(){l(!0)},className:"login"},"Login"),o.a.createElement(P.a,{isOpen:c,onRequestClose:d,className:"modalStyle",ariaHideApp:!1},e.Loading?o.a.createElement(x,null):o.a.createElement("div",{className:"basediv"},o.a.createElement("img",{src:C.a,alt:"logo",style:{height:"30px",width:"30px",display:"block",margin:"auto",marginTop:"20px"}}),o.a.createElement("form",{id:"login",className:"formStyle",method:"POST"},o.a.createElement("label",null,"Username"),o.a.createElement("input",{name:"username",type:"text"}),o.a.createElement("label",null,"Password"),o.a.createElement("input",{name:"password",type:"password"}),o.a.createElement("button",{onClick:function(e){return function(e){e.preventDefault();var t,a=document.getElementById("login").querySelectorAll("input"),n={},o=Object(N.a)(a);try{for(o.s();!(t=o.n()).done;){var c=t.value;n[c.name]=c.value}}catch(l){o.e(l)}finally{o.f()}console.log(n),u(n)}(e)},className:"smallbtn"},"login")))))})),G=a(126),K=a(125),B=a(124),M=function(e){return function(t){t({type:"GO_TO_PROFILE",payload:!e})}};function z(e){return o.a.createElement(K.a,Object.assign({elevation:6,variant:"filled"},e))}var H=Object(B.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}));var J=Object(u.b)((function(e){return{success:e.loginReducer.done,openData:e.miscActionReducer.open}}),(function(e){return{openSnackbar:function(t){return e((a=t,function(e){e({type:"SNACK_BAR",payload:a})}));var a}}}))((function(e){var t=H(),a=Object(n.useState)(!1),c=Object(R.a)(a,2),l=c[0],i=c[1],r=function(e,t){"clickaway"!==t&&i(!1)};return Object(n.useEffect)((function(){console.log(e.openData),e.openData.msg&&i(!0)}),[e.openData]),o.a.createElement("div",{className:t.root},o.a.createElement(G.a,{open:l,autoHideDuration:2500,onClose:r},0===e.openData.type?o.a.createElement(z,{onClose:r,severity:"error"},e.openData.msg):1===e.openData.type?o.a.createElement(z,{onClose:r,severity:"success"},e.openData.msg):2===e.openData.type?o.a.createElement(z,{onClose:r,severity:"warning"},e.openData.msg):3===e.openData.type?o.a.createElement(z,{onClose:r,severity:"info"},e.openData.msg):o.a.createElement(z,{onClose:r,severity:"info"},"Loading...")))}));var Y=Object(u.b)((function(e){return{data:e.loginReducer.data}}),(function(e){return{}}))((function(e){return console.log(localStorage.getItem("twitter-token")),o.a.createElement("div",{className:"header"},o.a.createElement("img",{src:C.a,alt:"logo",style:{height:"48px",width:"48px"}}),localStorage.getItem("username")?o.a.createElement("div",{className:"headerContent"},"Hey Welcome ",localStorage.getItem("username"),"!"):o.a.createElement("div",{className:"headerContent"},"Home"),localStorage.getItem("username")?"":o.a.createElement(F,null),localStorage.getItem("username")?"":o.a.createElement(W,null),o.a.createElement(J,null))})),q=Object(n.createContext)(),V=function(e){var t=Object(n.useState)(!1),a=Object(R.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(!1),r=Object(R.a)(i,2),s=r[0],u=r[1],d=Object(n.useState)(null),m=Object(R.a)(d,2),g=m[0],p=m[1],f=Object(n.useState)(null),E=Object(R.a)(f,2),b=E[0],O=E[1],v=Object(n.useState)(null),y=Object(R.a)(v,2),h=y[0],L=y[1],j=Object(n.useState)(!1),S=Object(R.a)(j,2),T=S[0],_=S[1],w=Object(n.useState)(!1),I=Object(R.a)(w,2),A=I[0],k=I[1];return o.a.createElement(q.Provider,{value:{chat:c,setChat:l,mytweet:s,setMytweet:u,editTweet:g,setEditTweet:p,editTweetContent:b,setEditTweetContent:O,editTweetLikes:h,setEditTweetLikes:L,loader:T,setLoader:_,loader2:A,setLoader2:k}},e.children)},Q=a(29),$=a(67),X=a.n($),Z=a(49),ee=a.n(Z),te=a(68),ae=a.n(te),ne=Object(u.b)((function(e){return{Loading:e.tweetReducer.isLoading,Likelist:e.likeReducer.data}}),(function(e){return{deleteTweet:function(t){return e(function(e){return function(t){console.log(e);var a={method:"DELETE",headers:{Authorization:"Token "+e.token}};t({type:"DEL_TWEET_LOAD",isLoading:!0}),fetch("".concat(U,"/tweet?tweet_id=").concat(e.tweet_id),a).then((function(e){console.log(e),204===e.status?t({type:"DEL_TWEET_SUCCESS",isLoading:!1,payload:e,done:1}):t({type:"DEL_TWEET_FAIL",isLoading:!1,payload:e,done:0})})).catch((function(e){console.log(e),t({type:"DEL_TWEET_FAIL",isLoading:!1,payload:e,done:0})}))}}(t))},updateTweet:function(t){return e(function(e){return function(t){console.log(e);var a={method:"PUT",headers:{Authorization:"Token "+e.token,"Content-Type":"application/json"},body:e.body};t({type:"UPD_TWEET_LOAD",isLoading:!0}),fetch("".concat(U,"/tweet?tweet_id=").concat(e.tweet_id),a).then((function(e){console.log(e);e.json().then((function(a){console.log(a),200===e.status?t({type:"UPD_TWEET_SUCCESS",isLoading:!1,payload:a,done:1}):t({type:"UPD_TWEET_FAIL",isLoading:!1,payload:a,done:0})}))})).catch((function(e){e.json().then((function(e){t({type:"UPD_TWEET_FAIL",isLoading:!1,payload:e,done:0})}))}))}}(t))},likeTweet:function(t){return e(function(e){return function(t){console.log(e);var a={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"token "+localStorage.getItem("twitter-token")},body:e.body};t({type:"LIKE_TWEET",isLoading:!0}),fetch("".concat(U,"/tweet/tweet-like"),a).then((function(e){console.log(e);e.json().then((function(a){console.log(a),200===e.status?t({type:"LIKE_TWEET",isLoading:!1,payload:a,done:1}):t({type:"LIKE_TWEET",isLoading:!1,payload:a,done:0})}))})).catch((function(e){e.json().then((function(e){t({type:"LIKE_TWEET",isLoading:!1,payload:e,done:0})}))}))}}(t))},fetchLikeList:function(t){return e(function(e){return function(t){t({type:"GET_LIKE_LIST_LOAD",isLoading:!0}),fetch("".concat(U,"/tweet/tweet-like?_id=").concat(e.tweet_id),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){e.json().then((function(a){200===e.status?t({type:"GET_LIKE_LIST_SUCCESS",isLoading:!1,payload:a}):t({type:"GET_LIKE_LIST_FAIL",isLoading:!1,payload:a})}))})).catch((function(e){e.json().then((function(e){t({type:"GET_LIKE_LIST_FAIL",isLoading:!1,payload:e})}))}))}}(t))}}}))((function(e){var t=Object(n.useRef)(null),a=Object(n.useState)(null),c=Object(R.a)(a,2),l=c[0],i=c[1],r=Object(n.useState)(null),s=Object(R.a)(r,2),u=s[0],d=s[1],m=Object(n.useState)(null),g=Object(R.a)(m,2),f=g[0],E=g[1],b=Object(n.useState)(!1),O=Object(R.a)(b,2),v=O[0],y=O[1],h=Object(n.useState)(0),L=Object(R.a)(h,2),j=L[0],S=L[1],T=Object(n.useState)(!1),_=Object(R.a)(T,2),w=_[0],I=_[1];Object(n.useEffect)((function(){d({message:e.content})}),[]);Object(n.useEffect)((function(){!0===v&&t.current.focus()}),[v]),Object(n.useEffect)((function(){if(null!==l){var t={token:localStorage.getItem("twitter-token"),tweet_id:l};e.deleteTweet(t),i(null)}}),[l]),Object(n.useEffect)((function(){}),[u]),Object(n.useEffect)((function(){if(null!==f){var t={token:localStorage.getItem("twitter-token"),tweet_id:f,body:JSON.stringify(u)};e.updateTweet(t),E(null),y(!1)}}),[f]),Object(n.useEffect)((function(){if(null===e.Likelist&&localStorage.getItem("username")){var t={tweet_id:e.id};e.fetchLikeList(t)}}),[e.Likelist]);var A=e.upd||"",k=A.split("T"),C=new Date(k[0]),N=new Date(A),D=[];if(e.img&&e.img.length)for(var P=0;P<e.img.length;P++)D.push(j===P?o.a.createElement("img",{src:e.img[P],alt:"image",className:"tweetPostImage"}):"");var U=[];e.vid&&U.push(o.a.createElement("video",{className:"videoDiv",controls:!0},o.a.createElement("source",{src:e.vid})));var x=function(){return o.a.createElement("div",null,o.a.createElement("div",{className:"dropdown"},o.a.createElement("button",{onClick:function(){return I(!w)},className:"dropbtn"},"..."),o.a.createElement("div",{className:"dropdown-content"},!0===w?o.a.createElement("div",null,localStorage.getItem("userid")===e.userid?o.a.createElement("span",null,o.a.createElement("div",{onClick:function(){return t=e.id,void i(t);var t},className:"deletebtn"},"delete")," ",o.a.createElement("div",{onClick:!0===v?function(){return t=e.id,void E(t);var t}:function(){y(!0)},className:"deletebtn"},!0===v?"save":"edit")):o.a.createElement("div",{className:"deletebtn"},"report")):"")))};return o.a.createElement("div",{className:"tweet"},o.a.createElement("div",{className:"aboveTweet"},o.a.createElement("div",{className:"user"},o.a.createElement("img",{src:null===e.pimg?ee.a:e.pimg,alt:"profile",className:"usertweetpic"}),e.user),o.a.createElement("div",{className:"tweetTime"},N.toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric",hour12:!0})," \xb7 ",C.toLocaleDateString("en-US",{day:"numeric",month:"short",year:"numeric"})),o.a.createElement(x,null)),o.a.createElement("div",{className:"mainTweet"},!0===v?o.a.createElement("input",{ref:t,onChange:function(e){return t="message",a=e.target.value,void d(Object(p.a)(Object(p.a)({},u),{},Object(Q.a)({},t,a)));var t,a},className:"mainTweet editTweetcontent",value:u.message}):o.a.createElement("div",{className:"tweetContent"},e.content),D,D.length>1?o.a.createElement("span",{className:"slideImage"},1===j||2===j?o.a.createElement("a",{onClick:function(){return S(j-1)},class:"prev"},"\u276e"):"",0===j||1===j&&D.length>2?o.a.createElement("a",{onClick:function(){return S(j+1)},class:"next"},"\u276f"):""):"",U),o.a.createElement("div",{className:"likes"},o.a.createElement("img",{onClick:function(){return function(t){var a={id:t,body:JSON.stringify({flag:e.like_flag?-1:1,_id:t})};e.likeTweet(a)}(e.id)},src:!0===e.like_flag?X.a:ae.a,alt:"like",style:{height:"30px",width:"30px",display:"inline",margin:"auto",cursor:"pointer"}}),e.likes>0?e.likes+" people liked it":"Be the first to like this"))})),oe=Object(u.b)((function(e){return{myTweets:e.myTweetsReducer.data,Loading:e.myTweetsReducer.isLoading,Users:e.miscActionReducer.userData,update:e.tweetReducer.isLoading}}),(function(e){return{fetchMyTweets:function(){return e((function(e){console.log("token-",localStorage.getItem("twitter-token")),console.log("userid-",localStorage.getItem("userid"));var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"token "+localStorage.getItem("twitter-token")}};e({type:"MY_TWEETS_LOAD",isLoading:!0}),fetch("".concat(U,"/tweet/?page=1&userid=").concat(localStorage.getItem("userid")),t).then((function(t){t.json().then((function(a){console.log(a),200===t.status?e({type:"MY_TWEETS_SUCCESS",isLoading:!1,payload:a}):e({type:"MY_TWEETS_FAIL",isLoading:!1,payload:a})}))})).catch((function(t){t.json().then((function(t){e({type:"MY_TWEETS_FAIL",isLoading:!1,payload:t})}))}))}))}}}))((function(e){var t=Object(n.useState)(null),a=Object(R.a)(t,2),c=a[0],l=a[1];return Object(n.useEffect)((function(){e.myTweets?(l(e.myTweets.message),console.log(e.myTweets.message)):e.fetchMyTweets()}),[e.myTweets]),Object(n.useEffect)((function(){e.fetchMyTweets()}),[e.update]),o.a.createElement("div",{style:{marginBottom:"100px"}},!0===e.Loading?o.a.createElement(x,null):c?c.map((function(t){return o.a.createElement(ne,{key:t._id,id:t._id,userid:t.author,content:t.message,likes:t.likescount,like_flag:t.like_flag,upd:t.createdAt,pimg:e.Users[t.author].profilePic,user:e.Users[t.author].name,comm:t.commentscount,vid:t.videolinks,img:t.imagelinks})})):"")})),ce=Object(u.b)((function(e){return{tweets:e.allTweetsReducer.tweets,users:e.allTweetsReducer.users,Loading:e.allTweetsReducer.isLoading,success:e.loginReducer.done,update:e.tweetReducer.done,load:e.miscActionReducer.load,doneLike:e.likeReducer.flag}}),(function(e){return{fetchAllTweets:function(t){return e(function(e){return function(t){var a={method:"GET",headers:{"Content-Type":"application/json"}};localStorage.getItem("twitter-token")&&(a={method:"GET",headers:{"Content-Type":"application/json",Authorization:"token "+localStorage.getItem("twitter-token")}}),console.log("id",localStorage.getItem("twitter-token")),console.log(a),t({type:"ALL_TWEETS_LOAD",isLoading:!0}),fetch("".concat(U,"/tweet/alltweets?page=").concat(e),a).then((function(a){a.json().then((function(n){console.log(e),console.log(n),200===a.status?t({type:"ALL_TWEETS_SUCCESS",isLoading:!1,tweets:n.message.tweets,users:n.message.users}):t({type:"ALL_TWEETS_FAIL",isLoading:!1,payload:n})}))})).catch((function(e){e.json().then((function(e){t({type:"ALL_TWEETS_FAIL",isLoading:!1,payload:e})}))}))}}(t))},getUserData:function(t){return e((a=t,function(e){e({type:"USER_DATA",payload:a})}));var a},getUsernameData:function(t){return e((a=t,function(e){e({type:"USERNAME_DATA",payload:a})}));var a}}}))((function(e){var t=Object(n.useState)([]),a=Object(R.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)([]),r=Object(R.a)(i,2),s=(r[0],r[1],Object(n.useState)({})),u=Object(R.a)(s,2),d=u[0],m=u[1],g=Object(n.useState)({}),f=Object(R.a)(g,2),E=f[0],O=(f[1],Object(n.useState)(1)),v=Object(R.a)(O,2),y=v[0],h=v[1];return Object(n.useEffect)((function(){if(e.tweets){console.log(e.tweets.length),l([].concat(Object(b.a)(c),Object(b.a)(e.tweets))),console.log([].concat(Object(b.a)(c),Object(b.a)(e.tweets)));var t,a=e.users||[],n=Object(p.a)({},d),o=Object(p.a)({},E),i=Object(N.a)(a);try{for(i.s();!(t=i.n()).done;){var r=t.value;n[r._id]={name:r.name,username:r.username,profilePic:r.profile.profilePic},o[r.username]=r._id}}catch(s){i.e(s)}finally{i.f()}console.log(n),m(n),e.getUserData(n),e.getUsernameData(o)}}),[e.tweets]),Object(n.useEffect)((function(){1===e.success&&e.fetchAllTweets(1)}),[e.success]),Object(n.useEffect)((function(){l([]),e.fetchAllTweets(1),console.log("upadting..."),console.log(e.update)}),[e.update,e.doneLike]),Object(n.useEffect)((function(){!0===e.load&&(h(y+1),e.fetchAllTweets(y+1))}),[e.load]),o.a.createElement("div",{style:{marginBottom:"100px"}},c?c.map((function(e){return o.a.createElement("div",{key:e._id},o.a.createElement(ne,{key:e._id,id:e._id,userid:e.author,content:e.message,like_flag:e.like_flag,likes:e.likescount,upd:e.createdAt,pimg:d[e.author]?d[e.author].profilePic:"",user:d[e.author]?d[e.author].name:"",comm:e.commentscount,vid:e.videolinks,img:e.imagelinks}))})):o.a.createElement(x,null),e.Loading&&o.a.createElement(x,null))})),le=Object(u.b)((function(e){return{flag:e.miscActionReducer.flag,profile:e.miscActionReducer.profile,success:e.loginReducer.done,data:e.loginReducer.data}}),(function(e){return{logout:function(){return e((function(e){e({type:"LOGOUT",isLoading:!1,payload:null})}))},changeTweetPage:function(t){return e((a=t,function(e){e({type:"CHANGE_TWEET_PAGE",payload:!a})}));var a},goToProfile:function(t){return e(M(t))}}}))((function(e){return o.a.createElement("div",{className:"sidebar"},o.a.createElement("div",{className:"sidebarDiv"},o.a.createElement("div",{className:"sidebarOptions"},"#Explore"),null===localStorage.getItem("username")||void 0===localStorage.getItem("username")?"":o.a.createElement("div",{className:"mobileSec"},o.a.createElement("div",{className:"sidebarOptions",onClick:function(){console.log("wip")}},"Messages"),!1===e.profile?o.a.createElement("div",{onClick:function(){e.changeTweetPage(e.flag)},className:"sidebarOptions"},e.flag?"My tweets":"All tweets"):o.a.createElement("div",{onClick:function(){e.goToProfile(e.profile)},className:"sidebarOptions"},"Home"),o.a.createElement("div",{onClick:function(){localStorage.removeItem("twitter-token"),localStorage.removeItem("userid"),localStorage.removeItem("name"),localStorage.removeItem("username"),localStorage.removeItem("email"),localStorage.removeItem("userPic"),e.logout()},className:"sidebarOptions"},"log out"))))})),ie=a(69),re=(a(96),ie.a.initializeApp({apiKey:"AIzaSyA_Q8j3cYRSgSWO8PvU4OSJ4Kd9n5nqg24",authDomain:"testing-speakup.firebaseapp.com",projectId:"testing-speakup",storageBucket:"testing-speakup.appspot.com",messagingSenderId:"630260348505",appId:"1:630260348505:web:772c7527762ada2791a348"})),se=Object(u.b)((function(e){return{user:e.miscActionReducer.usernameData}}),(function(e){return{}}))((function(e){var t=Object(n.useState)(!1),a=Object(R.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)([]),r=Object(R.a)(i,2),s=r[0],u=r[1],d=Object(n.useState)([]),m=Object(R.a)(d,2),g=m[0],p=m[1],f=Object(n.useState)(""),E=Object(R.a)(f,2),O=E[0],v=E[1],y=Object(n.useState)(null),h=Object(R.a)(y,2),L=h[0],j=h[1],S=Object(n.useState)(null),T=Object(R.a)(S,2),_=T[0],w=T[1];Object(n.useRef)(null);Object(n.useEffect)((function(){if(console.log(_),_){var e=_,t=re.database().ref(e);console.log("listening...");var a=[];return t.on("child_added",(function(e){var t=e;console.log(t.key+" "+t.val().message),a.push(o.a.createElement("div",{key:t.val().timestamp},o.a.createElement("span",{style:{color:"white"}},t.val().author,":  "),t.val().message));var n=[];g.includes(t.key)||(n.push.apply(n,Object(b.a)(g).concat([t.key])),p(n),console.log(n),a.sort((function(e,t){return e.key-t.key})),console.log(a),u(a))})),function(){return t.off("child_added")}}}),[s,_]);return localStorage.getItem("twitter-token")&&o.a.createElement("div",{style:{textAlign:"center"},className:"rightSidebar"},!c&&o.a.createElement("div",null,o.a.createElement("div",null,"Chat Box"),o.a.createElement("input",{className:"usernameChat",onChange:function(e){return t=e.target.value,void j(t);var t},placeholder:"username"}),L&&o.a.createElement("div",{className:"searchTweet",onClick:function(){return function(){var t=localStorage.getItem("userid"),a=e.user[L];if(!e.user[L])return alert("invalid username"),!1;var n=t<a?t+a:a+t;console.log(t),console.log(a),console.log(n),w(n),l(!0)}()}},"Open Chat for ",L)),c&&o.a.createElement("div",null,o.a.createElement("div",null,"Chat box"),o.a.createElement("div",{className:"chatspace"},s),o.a.createElement("input",{className:"msg",placeholder:"message",value:O,onChange:function(e){return t=e.target.value,void v(t);var t}}),o.a.createElement("div",{className:"smallbtn",onClick:function(){return function(){var e=re.database().ref(_),t=(new Date).getTime();console.log(O),e.push().set({authorId:localStorage.getItem("userid"),author:localStorage.getItem("username"),message:O,timestamp:t}),v("")}()}},"send")))})),ue=Object(n.createContext)(),de=function(e){var t={position:"bottom-right",style:{backgroundColor:"#336600",border:"2px solid #408000",color:"white",fontSize:"20px",textAlign:"center",borderRadius:"5px"},closeStyle:{color:"white",fontSize:"16px"}},a={position:"bottom-right",style:{backgroundColor:"#cc3300",border:"2px solid #e63900",color:"white",fontSize:"20px",textAlign:"center",borderRadius:"5px"},closeStyle:{color:"white",fontSize:"16px"}},n=Object(A.b)(t),c=Object(R.a)(n,2),l=c[0],i=c[1],r=Object(A.b)(a),s=Object(R.a)(r,2),u=s[0],d=s[1];return o.a.createElement(ue.Provider,{value:{options:t,optionsError:a,openSnackbar:l,openErrSnackbar:u,closeSnackbar:i,closeErrSnackbar:d}},e.children)},me=function(e){return o.a.createElement("div",null,e.image?o.a.createElement("img",{className:"profilePic",src:e.image}):o.a.createElement("img",{className:"profilePic",src:ee.a}))},ge=a(50),pe=a.n(ge),fe=a(70),Ee=a.n(fe),be=a(71),Oe=a.n(be),ve=Object(u.b)((function(e){return{Loading:e.tweetReducer.isLoading,LoginLoading:e.loginReducer.isLoading,success:e.loginReducer.done,LoginData:e.loginReducer.data,profile:e.miscActionReducer.profile}}),(function(e){return{createTweet:function(t){return e(function(e){return function(t){console.log(e);var a={method:"POST",headers:{Authorization:"Token "+e.token},body:e.data};t({type:"CREATE_TWEET_LOAD",isLoading:!0}),fetch("".concat(U,"/tweet"),a).then((function(e){return e.json()})).then((function(e){console.log(e),200===e.status?(t({type:"CREATE_TWEET_SUCCESS",isLoading:!1,payload:e,done:1}),t({type:"SNACK_BAR",payload:{type:1,msg:"Posted!"}})):(t({type:"CREATE_TWEET_FAIL",isLoading:!1,payload:e,done:0}),t({type:"SNACK_BAR",payload:{type:0,msg:"Post unsuccessful!"}}))})).catch((function(e){t({type:"CREATE_TWEET_FAIL",isLoading:!1,payload:e,done:0})}))}}(t))},goToProfile:function(t){return e(M(t))}}}))((function(e){var t=Object(n.useState)(null),a=Object(R.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(null),r=Object(R.a)(i,2),s=r[0],u=r[1],d=Object(n.useState)(null),m=Object(R.a)(d,2),g=(m[0],m[1],function(e,t){console.log(e),console.log(t),l(Object(p.a)(Object(p.a)({},c),{},Object(Q.a)({},e,t)))});return console.log(c),o.a.createElement("div",{className:"tweetbox"},!0===e.Loading?o.a.createElement(x,null):null===localStorage.getItem("username")||void 0===localStorage.getItem("username")?o.a.createElement("h3",{style:{fontFamily:"Avenir-Medium",margin:"auto",color:"#073f63"}},"Login to start tweeting!"):o.a.createElement("div",null,o.a.createElement("div",{style:{display:"flex"}},o.a.createElement("div",{style:{cursor:"pointer"},onClick:function(){e.goToProfile(e.profile)}},o.a.createElement(me,{image:localStorage.getItem("userPic")})),o.a.createElement("form",{class:"tweetboxform"},o.a.createElement("textarea",{id:"tweetContent",onChange:function(e){return g("message",e.target.value)},name:"content",rows:"5",cols:"30",placeholder:"What's happening?",className:"textArea"}))),c&&c.imagelinks&&c.imagelinks.length>0&&"img"===s?o.a.createElement("img",{className:"tweetPostImage",src:URL.createObjectURL(c.imagelinks[0])}):"",c&&c.imagelinks&&c.imagelinks.length>1&&"img"===s?o.a.createElement("img",{className:"tweetPostImage",src:URL.createObjectURL(c.imagelinks[1])}):"",c&&c.imagelinks&&c.imagelinks.length>2&&"img"===s?o.a.createElement("img",{className:"tweetPostImage",src:URL.createObjectURL(c.imagelinks[2])}):"",c&&c.videolinks&&"vid"===s?o.a.createElement("video",{className:"videoDiv",controls:!0},o.a.createElement("source",{src:URL.createObjectURL(c.videolinks)})):"",o.a.createElement("div",null,o.a.createElement("div",{onClick:function(){return u(null)},style:{position:"relative",top:"60px",left:"400px"}},s?o.a.createElement("img",{src:Oe.a,className:"multibtn"}):""),o.a.createElement("input",{type:"file",id:"postImage",className:"imageUpload",onChange:function(e){return g("imagelinks",e.target.files)},multiple:!0}),o.a.createElement("label",{onClick:function(){return u("img")},style:"vid"===s?{pointerEvents:"none",opacity:"0.35"}:{},className:"uploadImage",htmlFor:"postImage"},o.a.createElement("img",{src:pe.a,className:"multibtn"})),o.a.createElement("input",{type:"file",id:"postVideo",className:"imageUpload",onChange:function(e){return g("videolinks",e.target.files[0])}}),o.a.createElement("label",{onClick:function(){return u("vid")},style:"img"===s?{pointerEvents:"none",opacity:"0.35"}:{},className:"uploadImage",htmlFor:"postVideo"},o.a.createElement("img",{src:Ee.a,className:"multibtn"})),o.a.createElement("input",{className:"smallbtn2",onClick:function(t){return function(t){t.preventDefault();var a=new FormData;if(a.append("message",c.message),"img"===s){console.log(c.imagelinks);for(var n=0;n<c.imagelinks.length;n++)console.log(c.imagelinks[n]),a.append("imagelinks",c.imagelinks[n])}else"vid"===s&&a.append("videolinks",c.videolinks);console.log(a);var o={data:a,token:localStorage.getItem("twitter-token")};e.createTweet(o)}(t)},type:"submit",value:"Tweet"}))))})),ye=a(72),he=a.n(ye),Le=Object(u.b)((function(e){return{profile:e.profileReducer.data,Loading:e.profileReducer.isLoading}}),(function(e){return{fetchProfile:function(t){return e(function(e){return function(t){console.log(e);t({type:"GET_PROFILE_LOAD",isLoading:!0}),fetch("".concat(U,"/profile?username=").concat(e.username),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){e.json().then((function(a){200===e.status?(console.log(a),t({type:"GET_PROFILE_SUCCESS",isLoading:!1,payload:a})):t({type:"GET_PROFILE_FAIL",isLoading:!1,payload:a})}))})).catch((function(e){e.json().then((function(e){t({type:"GET_PROFILE_FAIL",isLoading:!1,payload:e})}))}))}}(t))},updateProfile:function(t){return e(function(e){return function(t){console.log(e);var a={method:"PUT",headers:{Authorization:"Token "+e.token},body:e.data};t({type:"UPD_PROFILE_LOAD",isLoading:!0}),fetch("".concat(U,"/profile/update?username=").concat(e.username),a).then((function(e){e.json().then((function(a){200===e.status?(console.log(a),t({type:"UPD_PROFILE_SUCCESS",isLoading:!1})):t({type:"UPD_PROFILE_FAIL",isLoading:!1})}))})).catch((function(e){e.json().then((function(e){t({type:"UPD_PROFILE_FAIL",isLoading:!1})}))}))}}(t))}}}))((function(e){var t=Object(n.useState)(null),a=Object(R.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(!1),r=Object(R.a)(i,2),s=r[0],u=r[1],d=Object(n.useState)(null),m=Object(R.a)(d,2),g=m[0],f=m[1];Object(n.useEffect)((function(){if(e.profile)l(e.profile.profile),f(Object(p.a)(Object(p.a)({},g),{},{bio:e.profile.profile?e.profile.profile.bio:""})),console.log(e.profile);else{var t={username:localStorage.getItem("username")};e.fetchProfile(t)}}),[e.profile]),Object(n.useEffect)((function(){}),[s,g]);var E=function(e,t){f(Object(p.a)(Object(p.a)({},g),{},Object(Q.a)({},e,t)))};return o.a.createElement("div",null,!0===e.Loading?o.a.createElement(x,null):null===c?"":o.a.createElement("div",{className:"profileDiv"},0==s?o.a.createElement("img",{className:"profilePicProfile",src:c?c.profilePic:""}):o.a.createElement("div",null,o.a.createElement("img",{className:"profilePicProfile",src:c?c.profilePic:""}),o.a.createElement("input",{type:"file",id:"postImage",className:"imageUpload",onChange:function(e){return E("profilePic",e.target.files[0])}}),o.a.createElement("label",{className:"uploadImageProfile",htmlFor:"postImage"},o.a.createElement("img",{src:pe.a,style:{height:"30px",width:"30px",display:"inline",margin:"auto"}}))),o.a.createElement("div",null,o.a.createElement("div",{className:"profileName"},localStorage.getItem("name")),o.a.createElement("div",{className:"profileUsername"},"@",localStorage.getItem("username")),o.a.createElement("div",{className:"profileEmail"}," ",o.a.createElement("img",{src:he.a,style:{height:"20px",width:"20px",display:"inline",margin:"auto",verticalAlign:"middle"}}),"  ",localStorage.getItem("email")),!1===s?o.a.createElement("div",null,null===c?o.a.createElement("div",{className:"bio"}," Tell us about yourself"):o.a.createElement("div",{className:"bio"},c.bio)):o.a.createElement("div",null,o.a.createElement("input",{className:"bioInput",onChange:function(e){return E("bio",e.target.value)},value:null===g?"":g.bio,type:"text",placeholder:"Tell us about yourself..."})),o.a.createElement("div",{className:"follow"},o.a.createElement("div",null,o.a.createElement("span",null,c.following),"Following"),o.a.createElement("div",null,o.a.createElement("span",null,c.followers),"Followers ")),o.a.createElement("div",{className:"editbtn",onClick:function(){!1===s?u(!0):function(){var t=new FormData;for(var a in g)t.append(a,g[a]);console.log(t);var n={data:t,token:localStorage.getItem("twitter-token"),username:localStorage.getItem("username")};e.updateProfile(n),u(!1);var o={username:localStorage.getItem("username")};e.fetchProfile(o)}()}},!1===s?"edit":"save"))),o.a.createElement(oe,null))})),je=Object(u.b)((function(e){return{flag:e.miscActionReducer.flag,profile:e.miscActionReducer.profile,Loading:e.tweetReducer.isLoading,success:e.loginReducer.done,load:e.miscActionReducer.load,tweets:e.allTweetsReducer.tweets,update:e.tweetReducer.done,data:e.loginReducer.data}}),(function(e){return{loadData:function(t){return e((a=t,function(e){e({type:"LOAD_DATA",payload:!a})}));var a}}}))((function(e){return o.a.createElement("div",{className:"mainArea",onScroll:function(t){return function(t){t.target.scrollHeight-t.target.scrollTop<=t.target.clientHeight&&e.tweets.length>0&&(console.log("end"),e.loadData(e.load))}(t)}},!0===e.Loading?o.a.createElement(x,null):!1===e.profile?o.a.createElement("div",null,o.a.createElement(ve,null),e.flag?o.a.createElement(ce,null):o.a.createElement(oe,null),o.a.createElement("div",{style:{padding:"50px"}})):o.a.createElement(Le,null))}));var Se=function(){return o.a.createElement("div",null,o.a.createElement(A.a,null,o.a.createElement(de,null,o.a.createElement(V,null,o.a.createElement(Y,null),o.a.createElement(A.a,null,o.a.createElement("div",{className:"dashboard"},o.a.createElement(le,null),o.a.createElement(je,null),o.a.createElement(se,null)))))))};var Te=function(){return o.a.createElement("div",{className:"App"},o.a.createElement("div",{className:"AppInfo"},o.a.createElement("div",{className:"Info"}," New Twitter")),o.a.createElement("div",{className:"Sign"},o.a.createElement("img",{src:C.a,alt:"logo",style:{height:"180px",width:"180px"}}),"Join New Twitter today!",o.a.createElement(A.a,null,o.a.createElement(F,null),o.a.createElement(W,null))))};var _e=function(){return o.a.createElement("div",null,o.a.createElement(u.a,{store:I},o.a.createElement(s.a,null,o.a.createElement(i.a,null,o.a.createElement(r.c,null,o.a.createElement(r.a,{path:"/entry",exact:!0,component:Te}),o.a.createElement(r.a,{path:"/",exact:!0,component:Se}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(_e,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},14:function(e,t,a){},30:function(e,t,a){e.exports=a.p+"static/media/twitter.33f06ef7.svg"},49:function(e,t,a){e.exports=a.p+"static/media/person.6c017a1c.svg"},50:function(e,t,a){e.exports=a.p+"static/media/target.48d54fde.svg"},67:function(e,t,a){e.exports=a.p+"static/media/heart.8aa66e9f.svg"},68:function(e,t,a){e.exports=a.p+"static/media/unlikeheart.5211ae2d.svg"},70:function(e,t,a){e.exports=a.p+"static/media/screen-player.66a2810f.svg"},71:function(e,t,a){e.exports=a.p+"static/media/delete.99cfb475.svg"},72:function(e,t,a){e.exports=a.p+"static/media/email.f2103d04.svg"},78:function(e,t,a){e.exports=a(100)},83:function(e,t,a){}},[[78,1,2]]]);
//# sourceMappingURL=main.9bccc360.chunk.js.map